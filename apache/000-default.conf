<VirtualHost *:80>
    ServerName altaqastrategy.com
    ServerAlias www.altaqastrategy.com

    # Dossier o√π se trouve ton build frontend (adapte si besoin)
    DocumentRoot /app/dist/clients

    <Directory /app/dist/client>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granteds
    </Directory>

    # Proxy requests to /api to Node backend
    ProxyPreserveHost On
    ProxyPass /api http://localhost:5000/api
    ProxyPassReverse /api http://localhost:5000/api

    # Optional: Proxy websocket if you have it
    # ProxyPass /socket.io http://localhost:5000/socket.io
    # ProxyPassReverse /socket.io http://localhost:5000/socket.io

    # Handle fallback for SPA - redirect all non-file requests to index.html
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^ /index.html [L]

    ErrorLog /var/log/apache2/altaqastrategy.com-error.log
    CustomLog /var/log/apache2/altaqastrategy.com-access.log combined
</VirtualHost>