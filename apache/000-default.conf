# apache/000-default.conf

<VirtualHost *:80>
    DocumentRoot "/app/dist/client"

    ProxyPass "/api" "http://localhost:5000/api"
    ProxyPassReverse "/api" "http://localhost:5000/api"

    <Directory "/app/dist/client">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !^/api
    RewriteRule ^ /index.html [L]

    ErrorLog /var/log/apache2/error.log
    CustomLog /var/log/apache2/access.log combined
</VirtualHost>